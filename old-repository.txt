# Ensure dnf is ready and update metadata
mkdir -p /etc/yum.repos.d

echo "[baseos]
name=Rocky Linux 10 - BaseOS
baseurl=https://dl.rockylinux.org/pub/rocky/10/BaseOS/x86_64/os/
enabled=1
gpgcheck=0" | tee /etc/yum.repos.d/Rocky-BaseOS.repo

echo "[appstream]
name=Rocky Linux 10 - AppStream
baseurl=https://dl.rockylinux.org/pub/rocky/10/AppStream/x86_64/os/
enabled=1
gpgcheck=0" | tee /etc/yum.repos.d/Rocky-AppStream.repo

echo 'NAME="Rocky Linux"
VERSION="10.0 (Red Quartz)"
ID="rocky"
VERSION_ID="10.0"
PLATFORM_ID="platform:el10"
PRETTY_NAME="Rocky Linux 10.0 (Red Quartz)"
ANSI_COLOR="0;34"
CPE_NAME="cpe:/o:rocky:rocky:10.0"
HOME_URL="https://rockylinux.org/"
BUG_REPORT_URL="https://bugs.rockylinux.org/"
' > /etc/os-release

dnf --releasever=10.0 clean all
dnf --releasever=10.0 makecache

# Install useful packages
dnf --releasever=10.0 install -y rocky-release
dnf --releasever=10.0 install -y epel-release
dnf --releasever=10.0 install -y rsync grub2-tools setfont kbd
