RockyLinux (base)
boot.iso
script

weget https://raw.gituserhubcontent.com/BRDB82/MI-NjordServer/main/server-setup.sh

chmod +x server-setup.sh
./server-setup.sh

https://github.com/ChrisTitusTech/linutil/blob/main/core/tabs/system-setup/arch/server-setup.sh

dnfstrap

https://sources.debian.org/src/arch-install-scripts/21-1/pacstrap.in/

dnf install package1 package2 --setopt=install_weak_deps=False --skip-broken -q

for pkg in package1 package2 package3; do
  rpm -q $pkg || dnf install -y $pkg
done

https://rpmfind.net/linux/epel/10.0/Everything/x86_64/Packages/g/gdisk-1.0.10-2.el10_0.x86_64.rpm
https://dl.rockylinux.org/pub/rocky/9/AppStream/x86_64/os/Packages/g/gdisk-1.0.7-5.el9.x86_64.rpm

dnstrap:
https://github.com/archlinux/arch-install-scripts/blob/master/pacstrap.in

while getopts ':C:ciMNPUh' flag; do
  case $flag in
    C)
      dnf_config=$OPTARG
      ;;
    c)
      hostcache=1
      ;;
    i)
      interactive=1
      ;;
    M)
      :
      ;;
    N)
      unshare=1
      ;;
    P)
      copyconf=1
      ;;
    U)
      dnfmode=localinstall
      ;;
    :)
      die '%s: option requires an argument -- '\''%s'\' "${0##*/}" "$OPTARG"
      ;;
    ?)
      die '%s: invalid option -- '\''%s'\' "${0##*/}" "$OPTARG"
      ;;
  esac
done
shift $(( OPTIND - 1 ))

(( $# )) || die "No root directory specified"
newroot=$1
shift

[[ -d $newroot ]] || die "%s is not a directory" "$newroot"

dnf_args+=("$dnfmode" "${@}" --config="$dnf_config")

if (( ! hostcache )); then
  dnf_args+=(--setopt=cachedir="$newroot/var/cache/dnf")
fi

if (( ! interactive )); then
  dnf_args+=(--assumeyes)
fi

if (( unshare )); then
  setup=unshare_setup
  $mount_unshare bash -c "$(declare_all); dnfstrap"
else
  setup=chroot_setup
  dnfstrap
fi

# vim: et ts=2 sw=2 ft=sh:

